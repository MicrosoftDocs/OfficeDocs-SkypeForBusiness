---
title: "Deployment process overview for integrating on-premises Unified Messaging and Skype for Business"
ms.author: jambirk
author: jambirk
manager: serdars
ms.date: 2/16/2018
ms.audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 1bcadf0a-ca3d-436f-a2a0-09329d487b18
description: "Summary: Review this topic while planning to integrate Skype for Business Server with Exchange 2013 or 2016."
---

# Deployment process overview for integrating on-premises Unified Messaging and Skype for Business
 
**Summary:** Review this topic while planning to integrate Skype for Business Server with Exchange 2013 or 2016.
  
 If you want to integrate Exchange Unified Messaging (UM) with Skype for Business Server, you must perform the tasks outlined in this topic. Also be sure that you review the planning and deployment best practices described in [Plan for Exchange Unified Messaging integration in Skype for Business](unified-messaging.md). This topic assumes that you have deployed Skype for Business Server with a collocated Mediation Server and that you have enabled users for Skype for Business Server, but you may not have performed all deployment and configuration steps to enable Enterprise Voice, as described in [Deploy Enterprise Voice in Skype for Business Server](../../deploy/deploy-enterprise-voice/deploy-enterprise-voice.md) in the Deployment documentation.
 
> [!NOTE]
> Exchange Unified Messaging as previously known is no longer available in Skype for Business Server 2019, which uses Phone System to record voicemail messages and then leave the recording in a user's Exchange mailbox. See [Plan Cloud Voicemail service](../../../SfBServer2019/hybrid/plan-cloud-voicemail.md) for more information.
 
## Unified Messaging Integration Process

> [!IMPORTANT]
> It is important that you coordinate with your organization's Exchange administrators to confirm the tasks that each of you will perform to help ensure a smooth, successful integration. 
  
|**Phase**|**Steps**|**Required groups and roles**|**Deployment documentation**|
|:-----|:-----|:-----|:-----|
|Deploy one of the following:  <br/> • Mailbox  <br/> Microsoft Exchange Server 2010 or latest service pack  <br/> • Microsoft Exchange Server 2013  <br/> • Microsoft Exchange Server 2016  <br/>  |If you are using Microsoft Exchange Server 2013, install the following Exchange Server roles in either the same forest or a different forest as Skype for Business Server:  <br/> • Client Access  <br/> • Mailbox  <br/> If Microsoft Exchange Server 2013 and Exchange Unified Messaging (UM) are installed in different forests, configure each Exchange forest to trust the Skype for Business Server forest.  <br/> If you are using Exchange 2010, install the following Exchange Server roles in either the same forest or a different forest as Skype for Business Server:  <br/> • Unified Messaging  <br/> • Hub Transport  <br/> • Client Access  <br/> • Mailbox  <br/> If Skype for Business Server and Exchange Unified Messaging (UM) are installed in different forests, configure each Exchange forest to trust the Skype for Business Server forest.  <br/> |Enterprise administrators (if this is the first Exchange Server in the organization)  <br/> -OR-  <br/> Exchange Organization administrator (if this is not the first Exchange Server in the organization)  <br/> |See the appropriate documentation for your version of Exchange Server:  <br/> Exchange Server 2010 or latest service pack deployment documentation <br/> Exchange Server 2013 Planning and DeploymentExchange Server 2016 Planning and Deployment|
|Install certificates.  <br/> |Download and install certificates for each Exchange UM server from a trusted root certificate authority (CA). The certificates are required for mutual Transport Level Security (MTLS) between the servers running Exchange UM and Skype for Business Server.  <br/> |Administrators  <br/> |[Configure certificates on the server running Exchange Server Unified Messaging](../../deploy/integrate-with-exchange-server/exchangeunified-messaging-for-voice-mail.md#configure-certificates-on-the-server-running-exchange-server-unified-messaging)|
|Create and configure a new Exchange UM SIP dial plan.  <br/> |On the Exchange UM server, create a SIP dial plan based on your organization's specific deployment requirements.  <br/> |Exchange Organization administrator  <br/> | [Configuring Unified Messaging on Microsoft Exchange Server](../../deploy/integrate-with-exchange-server/exchangeunified-messaging-for-voice-mail.md#configuring-unified-messaging-on-microsoft-exchange-server) |
|Configure security settings for the Exchange UM SIP dial plan.  <br/> |To encrypt Enterprise Voice traffic, configure the security settings on the Exchange UM SIP dial plan as **SIP Secured** or **Secured**. This is an especially important step if you have deployed or plan to deploy Lync Phone Edition devices in your environment. For Lync Phone Edition devices to function in an environment with Exchange UM integration, Skype for Business Server encryption settings must align with the Exchange UM dial plan security settings. For details, refer to the Deployment documentation.  <br/> |Exchange Organization administrator  <br/> |For Exchange 2010 or latest service pack, see also:  <br/> [Configure VoIP Security on a UM Dial Plan](https://go.microsoft.com/fwlink/p/?LinkId=268697).  <br/> For Exchange 2013, see [Unified Messaging](https://go.microsoft.com/fwlink/p/?LinkId=266579).  <br/> |
|Add Unified Messaging servers to the Exchange UM SIP dial plan.  <br/> |To enable a newly installed Unified Messaging server to answer and process incoming calls, you must add the Unified Messaging server to a UM dial plan. In this case, add the server to the Exchange UM SIP dial plan.  <br/> |Administrators  <br/> Exchange Server administrators  <br/> |For Exchange 2010 or latest service pack, see [View or Configure the Properties of a UM Server](https://go.microsoft.com/fwlink/p/?linkId=268682).  <br/> For Exchange 2013, see [Unified Messaging](https://go.microsoft.com/fwlink/p/?LinkId=266579).  <br/> |
|Configure mailboxes with SIP addresses.  <br/> |Assign SIP addresses to the mailboxes of Enterprise Voice users who will be using Exchange UM features.  <br/> |Skype for Business Server administrator  <br/> Exchange Recipient administrator  <br/> |For Exchange 2010 or latest service pack, see [ Modify a SIP Address for a UM-Enabled User](https://go.microsoft.com/fwlink/p/?LinkId=268699).  <br/> For Exchange 2013, see [Unified Messaging](https://go.microsoft.com/fwlink/p/?LinkId=266579).  <br/> |
|Run the exchucutil.ps1 script.  <br/> |On the server running Exchange UM services, open the Exchange Management Shell and run the exchucutil.ps1 script, which does the following: <br/> <br/> • Grants Skype for Business Server permission to read Exchange UM Active Directory Domain Services objects, specifically, the SIP dial plans created in the previous task.  <br/><br/> • Creates a Unified Messaging IP gateway object in Active Directory for each Skype for Business Server Enterprise Edition pool or Standard Edition server that hosts users who are enabled for Enterprise Voice.  <br/><br/> • Creates an Exchange UM hunt group for each gateway. The hunt group pilot identifier will be the name of the dial plan that is associated with the corresponding gateway. These need to be mapped 1:1 if there is more than one dial plan.  <br/> |Exchange Organization administrator  <br/> Exchange Recipient administrator  <br/> |[Configure Unified Messaging on Microsoft Exchange with ExchUCUtil.ps1](#configure-unified-messaging-on-microsoft-exchange-with-exchucutilps1) |
|Configure Skype for Business Server dial plans.  <br/> |If you are integrating with Exchange 2010, create a new Enterprise Voice dial plan with a name that matches the Exchange UM dial plan fully qualified domain name (FQDN).  <br/> **Note:** You will need to do this for each UM Dial plan. <br/> If you are integrating with Exchange 2010 SP1, ensure that suitable global/site-level or pool-level Enterprise Voice dial plans have been configured.  <br/> **Note:** If you are integrating with Exchange 2010 SP1, the Skype for Business Server dial plan and Exchange UM SIP dial plan names do not need to match. <br/> |RTCUniversalServerAdmins  <br/> |[Create or modify a dial plan in Skype for Business Server](../../deploy/deploy-enterprise-voice/dial-plans.md) <br/> |
|Run the Exchange UM Integration tool.  <br/> | On the Skype for Business Server, run **ocsumutil.exe**, which:  <br/>  Creates Subscriber Access and Auto Attendant contact objects. <br/>  Validates that there is an Enterprise Voice dial plan with a name that matches the Exchange UM dial plan FQDN. If you are running Exchange 2010 SP1 or later, the dial plan names do not need to match, and you can ignore the tool's warning about this. <br/>  This tool works by scanning the Active Directory for Exchange UM settings and allowing the Skype for Business Server administrator to view, create, and edit contact objects. <br/> |RTCUniversalServerAdmins  *and*  RTCUniversalUserAdmins <br/> **Important:** To run ocsumutil.exe successfully, the user must belong to both of these groups. <br/> **Note:** To create Contact objects, the user who runs ocsumutil.exe must have the correct permission to the Active Directory organizational unit (OU) where the new contact objects are stored. This permission can be granted by running the **Grant-CsOUPermission** cmdlet. For details, see the Skype for Business Server Management Shell documentation. <br/> |[Configure Exchange Server Unified Messaging for Skype for Business Server voice mail](../../deploy/integrate-with-exchange-server/exchangeunified-messaging-for-voice-mail.md) <br/> |
|If necessary, perform other Enterprise Voice configuration steps.  <br/> |If you have not already configured Enterprise Voice settings on your servers or users, do one or more of the following:  <br/> • Deploy and configure  <br/> Public switched telephone network (PSTN) gateways and Mediation Servers  <br/> • Define voice policies, PSTN usage records, and outbound call routes.  <br/> • Enable users for Enterprise Voice.  <br/> • Optionally, configure specific users with dial plans.  <br/> Other configuration steps may be required depending on the Enterprise Voice features that you enable.  <br/> |RTCUniversalServerAdmins  <br/> RTCUniversalUserAdmins  <br/> |See topics in the following sections:  <br/> • [Configure voice policies, PSTN usage records, and voice routes in Skype for Business](../../deploy/deploy-enterprise-voice/voice-and-pstn.md) <br/> • [Deploy Enterprise Voice in Skype for Business Server](../../deploy/deploy-enterprise-voice/deploy-enterprise-voice.md) <br/> |
|Enable Enterprise Voice users for Exchange UM.  <br/> |On the Exchange UM server, ensure that a Unified Messaging mailbox policy has been created and that each user has a unique extension number assignment, and then enable the user for Unified Messaging.  <br/> |Exchange Recipient administrator  <br/> |For Exchange 2010 or latest service pack, see [Enable a User for Unified Messaging](https://go.microsoft.com/fwlink/p/?LinkId=268701).  <br/> For Exchange 2013, see [Unified Messaging](https://go.microsoft.com/fwlink/p/?LinkId=266579).  <br/> |
   




## See also

[Plan for Exchange Unified Messaging integration in Skype for Business](unified-messaging.md)